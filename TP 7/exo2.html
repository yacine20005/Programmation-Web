<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>My first clock</title>
    <script>
      "use strict";
      window.onload = function () {
        window.setTimeout(loaded, 1000);

        drawOnCanvas();
      };

      const loaded = function () {
        //console.log("tick !");
      };

      const refresh = function () {
        console.log("tick !");
        window.setTimeout(refresh, 1000);
      };

      const refresh_v2 = function () {
        window.setInterval(function () {
          console.log("Tick !");
        }, 1000);
      };

      const refresh_v3 = function () {
        window.setInterval(function () {
          console.log(new Date());
        }, 1000);
      };

      const refresh_v4 = function () {
        window.setInterval(function () {
          let seconds = new Date().getSeconds();
          let minutes = new Date().getMinutes();
          let hours = new Date().getHours();
          console.log(hours + ":" + minutes + ":" + seconds);
        }, 1000);
      };

      const refresh_v5 = function () {
        window.setInterval(function () {
          let seconds = new Date().getSeconds();
          console.log(fromPolar(300, 300, 220, seconds));
        }, 1000);
      };

      const refresh_v6 = function () {
        window.setInterval(function () {
          const canvas = document.getElementById("clock");
          const context = canvas.getContext("2d");

          context.beginPath();
          context.arc(300, 300, 220, 0, 2 * Math.PI);
          context.stroke();
          context.beginPath();
          context.moveTo(300, 300);
          let array = fromPolar(300, 300, 220, 0);
          context.lineTo(array[0], array[1]);
          context.stroke();
        }, 1000);
      };

      const drawOnCanvas = function () {
        const canvas = document.getElementById("clock");
        const context = canvas.getContext("2d");

        context.beginPath();
        context.arc(300, 300, 220, 0, 2 * Math.PI);
        context.stroke();
        context.beginPath();
        context.moveTo(300, 300);
        let array = fromPolar(300, 300, 220, 0);
        context.lineTo(array[0], array[1]);
        context.stroke();
      };

      const fromPolar = function (xc, yc, radius, s) {
        let x = xc + radius * Math.cos((s * Math.PI) / 30 - Math.PI / 2);
        let y = yc + radius * Math.sin((s * Math.PI) / 30 - Math.PI / 2);
        return [x, y];
      };

      refresh_v5();
    </script>
  </head>
  <body>
    <h2>Horloge</h2>
    <canvas id="clock" width="600" height="600"> </canvas>
  </body>
</html>
